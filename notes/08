입출력 장치
1. 장치 컨트롤러와 장치 드라이버

1) 장치 컨트롤러.
일반적으로 CPU와 메모리의 데이터 전송률은 매우 높지만 (데이터를 교환하는 속도) 입출력장치의 데이터 전송률은 상대적으로 매우 낮다.
그렇기에 기본적으로 입출력장치와 CPU간의 통신은 매우 어려워 진다.
이 이유에 의하여, 입출력 장치는 컴퓨터에 직접 연결되는 것이 아닌, 장치 컨트롤러 라는 하드웨어를 통해 연결된다.
즉 입출력 장치는 장치 컨트롤러를 통하여 컴퓨터 내부와 정보를 주고받는다. 

장치 컨트롤러는 크게 3가지 기능이 있다. CPU와 입출력장치 간의 통신 중개, 오류 검출, 데이터 버퍼링 이다.
데이터 버퍼링에서 버퍼링은 전송률이 높은 장치와 낮은 장치 사이에 주고 받는 데이터를 버퍼라는 임시 공간에 저장하여 전송률을 비슷하게 맞추는 방법이다.
예를 들어 보자. CPU가 입출력 장치에 정보를 보낼때는 버퍼는 이 정보를 모았다가, 장치가 전송률이 낮은 것을 알기에 조금씩 정보를 일부로 내보낸다.
반대로 입출력 장치에서 CPU에 정보를 보낼때는 CPU가 전송률이 높은 것을 알기에, 버퍼에 모았다가 한번에 CPU에 전달한다.

이번엔 장치 컨트롤러의 간략한 내부 구조를 보자.
제일 중요한것은 이 안에 데이터 레지스터, 상태레지스터, 제어 레지스터 이렇게 3가지가 있다는 것이다.
각각 데이터 레지스터는 CPU와 입출력 장치 사이에 주고받을 데이터가 담기는 레지스터이며, 이 레지스터가 버퍼 역할을 한다. 최근에는 주고받는 데이터가 많다면 레지스터 대신 RAM을 사용하기도 한다.
상태 레지스터는 입출력 장치의 준비, 작업 완료 상태, 오류 등의 정보가 저장되고, 제어 레지스터는 입출력장치가 수행할 내용에 대한 제어 정보와 명령을 저장하낟.
이 레지스터들에 대한 데이터는 버스를 타고 CPU, 입출력장치에 전달된다.

2) 장치 드라이버
새로 장치를 컴퓨터에 연결 할때 설치 해야 하는 것으로,
장치 컨트롤러의 동작을 감지고, 제어함으로써, 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램이다.
이는 마찬가지로 프로그램이므로 메모리에 저장된다.
즉 장치 컨트롤러가 입출력장치에 대하여, 인지할 수 있고, 동작시키는 정보에 대해 알 수 있게 하는 것이다.

장치 컨트롤러가 입출력 장치를 연결하기 위한 하드웨어적 통로라면, 장치 드라이버는 소프트웨어적 통로라고 생각하면 된다.

2. 입출력 방법
입출력 작업을 수행하려면 CPU와 장치컨트롤러가 정보를 당연히 주고 받아야 한다. 그럼 어떤 방법으로..? 
이떄 방법은 3가지가 있다.
1) 프로그램 입출력
기본적으로 프로그램 속 명령어로 입출력 장치를 제어하는 방법이다.
CPU가 프로그램 속 명령어를 실행하는 과정에서 입출력 명령어를 만나면, CPU는 입출력 장치에 연결된 장치 컨트롤러와 상호작용하며 입출력 작업을 수행한다.
메모리에 저장된 정보를 하드 디스크에 백업하는 상황을 가정해보자 (대게 보조기억 장치도 입출력 장치ㄱ로 묶여서 설명하곤 한다)
- 우선 메모리에 저장된 정보를 디스크에 백업한다는 것은 다른 말로는 하드 디스키에 새로운 정보를 쓴다는 것이다. CPU 는 하드 디스크 컨트롤러의 ‘제어 레지스터’ 에 쓰기 명령을 보낸다
- 이후 하드 디스크 컨트롤러는 하드 디스크의 상태를 확인하고, 상태 레지스터에 준비가 됬음을 표시한다.
- CPU는 상태 레지스터를 주기적으로 읽어보며 준비 여부를 확인한다. 이후 CPU 가 하드 디스크가 준비됨을알게 된 순간, 백업할 메모리의 정보를 데이터 레지스터에 쓴다. 
만약 백업 작업이 전부다 되지 않았다면,  다시 처음부터 반복한다.

이렇게 프로그램 입출력 방식에서의 입출력 방식은 CPU가 장치 컨트롤러의 레지스터 값을 읽고 씀으로써 이루어 진다.
그럼 CPU는 어떻게 이 레지스터들을 아는 것일까?
(1) 메모리 맵 입출력
메모리에 접근하기 위한 주소 공간과, 입출력 장치에 접근하기 위한 주소공간을 하나의 주소 공간으로 간주하는 방법이다.
예를 들어 1024개의 주소를 표현할 수 있는 컴퓨터가 있을때, 모두 메모리 주소를 표현하는데 사용하지 않는다.
512개는 메모리 주소로, 512개는 장치 컨트롤러의 레지스터를 표현하기 위하여 사용하는 것이다.
이는 메모리에 접근하는 명령어와 다를바가 없는 같은 방법이다.
(2) 고립형 입출력
메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 방법이다.
예를 들어보자 아까처럼 1024개의 주소 공간을 가진 컴퓨터가 있는거다. 
이 상황에서 제어버스에 ‘메모리 읽기/쓰기’ 선 이 아닌, ‘입출력장치 읽기/ 쓰기’ 선이 또 따로 있다고 하는 것이다. 
만약 이렇다면 메모리 맵 입출력과는 다르게, 1024개의 주소 공간을 입출력장치든 메모리든 모두 활용할 수 있다.
(의문점: 메모리 맵 입출력과 비교하였을떄, 그럼 단점은 무엇인가..? 동시에, 저렇게 모든 1024개의 주소 공간을 쓴다고 하더라도, 뒤죽박죽으로 되어있다면, 레지스터 주소 값을 찾기가 힘들지 아니한가..?)

